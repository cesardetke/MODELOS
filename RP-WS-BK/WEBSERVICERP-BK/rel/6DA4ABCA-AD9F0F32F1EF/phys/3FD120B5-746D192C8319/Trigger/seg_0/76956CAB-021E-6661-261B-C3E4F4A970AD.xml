<?xml version = '1.0' encoding = 'UTF-8'?>
<TriggerOraclev10g class="oracle.dbtools.crest.model.design.storage.oracle.v10g.TriggerOraclev10g" name="T_RP_MOD_NOVEDAD_15" directorySegmentName="seg_0" id="76956CAB-021E-6661-261B-C3E4F4A970AD">
<sourceConnName>PROD</sourceConnName>
<sourceObjSchema>RAPIPAGO</sourceObjSchema>
<sourceObjName>T_RP_MOD_NOVEDAD_15</sourceObjName>
<createdBy>CDETKE</createdBy>
<createdTime>2022-01-04 18:03:25 UTC</createdTime>
<ownerDesignName>WEBSERVICERP-BK</ownerDesignName>
<actions>UPDATE</actions>
<body><![CDATA[DECLARE
   wNumerador  NUMBER;
   v_accion VARCHAR2(1);
BEGIN
    IF NVL(:OLD.IS_DELETED,0) != NVL(:NEW.IS_DELETED,0) THEN
       IF :NEW.IS_DELETED = 'Y' THEN
          v_accion := 'B';
       ELSE
          v_accion := 'A';
       END IF;
       
       SELECT RAPIPAGO.RP_SQ_NOVEDAD_COBERTURA.NEXTVAL into wNUMERADOR FROM DUAL;  
       
       INSERT INTO RAPIPAGO.WS_COBERTURA_NOVEDADES
          (ID_NOVEDAD, ID_GRUPO, TABLA, ID_TABLA, ESTADO, ACCION, CAMPO, VALOR_ANT, VALOR_NVO)
       VALUES(wNumerador, 'FIX', 'WS_COBERTURA_FIX_PARAM', :OLD.ID_COBERTURA_FIX_PARAM,'P',v_accion, 'IS_DELETED', :OLD.IS_DELETED, :NEW.IS_DELETED);
    END IF;
    
    IF NVL(:OLD.SCRIPT,0) != NVL(:NEW.SCRIPT,0) AND :OLD.IS_DELETED = 'N' THEN
        v_accion := 'M';
           
       SELECT RAPIPAGO.RP_SQ_NOVEDAD_COBERTURA.NEXTVAL into wNUMERADOR FROM DUAL;  
       
       INSERT INTO RAPIPAGO.WS_COBERTURA_NOVEDADES
          (ID_NOVEDAD, ID_GRUPO, TABLA, ID_TABLA, ESTADO, ACCION, CAMPO, VALOR_ANT, VALOR_NVO)
       VALUES(wNumerador, 'FIX', 'WS_COBERTURA_FIX_PARAM', :OLD.ID_COBERTURA_FIX_PARAM,'P',v_accion, 'SCRIPT', :OLD.SCRIPT, :NEW.SCRIPT);
    END IF;
END;]]></body>
<triggerTime>AFTER</triggerTime>
<owner>C62C8F1E-2A53-0B75-10F9-F26CB65E46CC</owner>
<table>E24E24CE-767B-02E1-B8FB-E2DCDC07AFAD</table>
</TriggerOraclev10g>