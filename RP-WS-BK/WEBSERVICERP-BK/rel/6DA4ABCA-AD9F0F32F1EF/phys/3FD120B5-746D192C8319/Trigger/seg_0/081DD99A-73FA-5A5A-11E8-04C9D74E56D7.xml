<?xml version = '1.0' encoding = 'UTF-8'?>
<TriggerOraclev10g class="oracle.dbtools.crest.model.design.storage.oracle.v10g.TriggerOraclev10g" name="LOG_RP_EMPRESA_PUESTO_COBER" directorySegmentName="seg_0" id="081DD99A-73FA-5A5A-11E8-04C9D74E56D7">
<sourceConnName>PROD</sourceConnName>
<sourceObjSchema>RAPIPAGO</sourceObjSchema>
<sourceObjName>LOG_RP_EMPRESA_PUESTO_COBER</sourceObjName>
<createdBy>CDETKE</createdBy>
<createdTime>2022-01-04 18:03:25 UTC</createdTime>
<ownerDesignName>WEBSERVICERP-BK</ownerDesignName>
<actions>UPDATE, DELETE</actions>
<body><![CDATA[DECLARE
ERROR_GRABA EXCEPTION;
ZOPERACION CHAR(1);
BEGIN
IF UPDATING THEN
   ZOPERACION := 'M';
ELSE
 IF DELETING THEN
    ZOPERACION := 'B';
 ELSE
       ZOPERACION := '?';
 END IF;
END IF;
INSERT INTO RAPIPAGO.RP_EMPRESA_PUESTO_COBERT_LOG(
                                                    ID_EMPRESA_PUESTO_COBERTURA,
                                                    ID_EMPRESA_PUESTO, 
                                                    DESCRIPCION, 
                                                    TIPO_COBERTURA, 
                                                    ID_AGENTE, 
                                                    ID_ZONA, 
                                                    ID_AGENTE_SUCURSAL,
                                                    IS_DELETED, 
                                                    ID_ENV, 
                                                    AUD_DATE_INSERT, 
                                                    AUD_USER_INSERT, 
                                                    AUD_DATE_UPDATE, 
                                                    AUD_USER_UPDATE,
                                                    OPERACION, 
                                                    MOPERACION,
                                                    MODIFICADO_POR,
                                                    FH_MODIFICACION
                                                    )
VALUES(
        :VIEJO.ID_EMPRESA_PUESTO_COBERTURA,
        :VIEJO.ID_EMPRESA_PUESTO, 
        :VIEJO.DESCRIPCION, 
        :VIEJO.TIPO_COBERTURA,
        :VIEJO.ID_AGENTE, 
        :VIEJO.ID_ZONA, 
        :VIEJO.ID_AGENTE_SUCURSAL, 
        :VIEJO.IS_DELETED, 
        :VIEJO.ID_ENV, 
        :VIEJO.AUD_DATE_INSERT,
        :VIEJO.AUD_USER_INSERT, 
        :VIEJO.AUD_DATE_UPDATE, 
        :VIEJO.AUD_USER_UPDATE,
        :VIEJO.OPERACION,
        ZOPERACION,
        Usuario_Update(:NUEVO.AUD_USER_UPDATE),
        TO_CHAR(SYSDATE,'yyyy-mm-dd hh24:mi:ss')
        );
EXCEPTION
WHEN OTHERS THEN
RAISE ERROR_GRABA;
END; 
]]></body>
<triggerTime>BEFORE</triggerTime>
<owner>C62C8F1E-2A53-0B75-10F9-F26CB65E46CC</owner>
<ref_NEW_AS>NUEVO</ref_NEW_AS>
<ref_OLD_AS>VIEJO</ref_OLD_AS>
<table>DE6E5B4B-FFB6-0F88-A422-E11F2BED41EB</table>
</TriggerOraclev10g>