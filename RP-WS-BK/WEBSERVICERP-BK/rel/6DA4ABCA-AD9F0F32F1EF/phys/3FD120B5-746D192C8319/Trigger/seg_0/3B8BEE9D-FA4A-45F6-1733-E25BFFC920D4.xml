<?xml version = '1.0' encoding = 'UTF-8'?>
<TriggerOraclev10g class="oracle.dbtools.crest.model.design.storage.oracle.v10g.TriggerOraclev10g" name="T_RP_AGENTE_SUCURSAL_RESU" directorySegmentName="seg_0" id="3B8BEE9D-FA4A-45F6-1733-E25BFFC920D4">
<sourceConnName>PROD</sourceConnName>
<sourceObjSchema>RAPIPAGO</sourceObjSchema>
<sourceObjName>T_RP_AGENTE_SUCURSAL_RESU</sourceObjName>
<createdBy>CDETKE</createdBy>
<createdTime>2022-01-04 18:03:24 UTC</createdTime>
<ownerDesignName>WEBSERVICERP-BK</ownerDesignName>
<actions>INSERT</actions>
<body><![CDATA[DECLARE
lCuantos   NUMBER;
BEGIN
  if INSERTING then

        SELECT  COUNT(*)
        INTO    lCuantos
        FROM    RAPIPAGO.RP_CRONOGRAMA_ITEM
        WHERE   ID_AGENTE_SUCURSAL = :NEW.ID_AGENTE_SUCURSAL;

        IF lCuantos = 0 THEN
            
            INSERT INTO RAPIPAGO.RP_CRONOGRAMA_ITEM (
            ID_CRONOGRAMA_ITEM, ID_CRONOGRAMA, ID_PROCEDIMIENTO, ID_AGENTE, ID_EMPRESA_CENTRAL, 
            IS_DELETED, ID_ENV, AUD_DATE_INSERT, AUD_USER_INSERT, AUD_DATE_UPDATE, 
            AUD_USER_UPDATE, ID_GRUPO_PROCESO, ID_AGENTE_SUCURSAL
            )
            VALUES (
            TO_CHAR(SYSDATE,'YYMMDDHH24MI')||dbms_random.string('A', 10),
                    '28483128804000000120',
                    NULL, NULL, NULL,
                    'N', 'RPPRI', TO_CHAR(SYSDATE, 'YYYY-MM-DD HH24:MI:SS'), 'OP_RAPIUSER', NULL,
                    NULL, NULL, :NEW.ID_AGENTE_SUCURSAL
            ); 

        END IF;

  END IF;
EXCEPTION
     WHEN OTHERS THEN
       -- 
       RAISE ;
END ;]]></body>
<triggerTime>AFTER</triggerTime>
<owner>C62C8F1E-2A53-0B75-10F9-F26CB65E46CC</owner>
<table>80B68678-7C49-E212-35AF-0A3E3BDDD305</table>
</TriggerOraclev10g>