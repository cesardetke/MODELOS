<?xml version = '1.0' encoding = 'UTF-8'?>
<TriggerOraclev10g class="oracle.dbtools.crest.model.design.storage.oracle.v10g.TriggerOraclev10g" name="T_RP_AGENTE_SUC_TP_LINK_PRISMA" directorySegmentName="seg_0" id="24E76F01-5C85-1DE6-95F8-082501936BA2">
<sourceConnName>PROD</sourceConnName>
<sourceObjSchema>RAPIPAGO</sourceObjSchema>
<sourceObjName>T_RP_AGENTE_SUC_TP_LINK_PRISMA</sourceObjName>
<createdBy>CDETKE</createdBy>
<createdTime>2022-01-04 18:03:23 UTC</createdTime>
<ownerDesignName>WEBSERVICERP-BK</ownerDesignName>
<actions>INSERT</actions>
<body><![CDATA[BEGIN

--INSERTA TIPO VALOR PARA DEBITO LINK
INSERT INTO RAPIPAGO.RP_AGENTE_SUCURSAL_TIPO_VALOR  (ID_AGENTE_SUCURSAL_TIPO_VALOR,
                                                     ID_AGENTE_SUCURSAL,
                                                     ID_TIPO_VALOR,
                                                     IS_DELETED,
                                                     ID_ENV,
                                                     HABILITADO)
                                                     SELECT 
                                                     (TO_CHAR(SYSDATE,'YYMMDDHH24MI')||dbms_random.string('A', 10)), 
                                                     :NEW.ID_AGENTE_SUCURSAL,  
                                                     '53797188065600000935',
                                                     'N',
                                                     'RPPRI',
                                                     'Y'
                                                     FROM DUAL
                                                     WHERE NOT EXISTS (SELECT ID_AGENTE_SUCURSAL 
                                                                       FROM RAPIPAGO.RP_AGENTE_SUCURSAL_TIPO_VALOR 
                                                                       WHERE ID_AGENTE_SUCURSAL = :NEW.ID_AGENTE_SUCURSAL
                                                                       AND ID_AGENTE_SUCURSAL_TIPO_VALOR = '53797188065600000935'
                                                                       AND IS_DELETED = 'N');
 
--INSERTA TIPO VALOR PARA DEBITO PRISMA                                                                      
INSERT INTO RAPIPAGO.RP_AGENTE_SUCURSAL_TIPO_VALOR  (ID_AGENTE_SUCURSAL_TIPO_VALOR,
                                                     ID_AGENTE_SUCURSAL,
                                                     ID_TIPO_VALOR,
                                                     IS_DELETED,
                                                     ID_ENV,
                                                     HABILITADO)
                                                     SELECT 
                                                     (TO_CHAR(SYSDATE,'YYMMDDHH24MI')||dbms_random.string('A', 10)), 
                                                     :NEW.ID_AGENTE_SUCURSAL,  
                                                     '53797188065600000944',
                                                     'N',
                                                     'RPPRI',
                                                     'Y'
                                                     FROM DUAL
                                                     WHERE NOT EXISTS (SELECT ID_AGENTE_SUCURSAL 
                                                                       FROM RAPIPAGO.RP_AGENTE_SUCURSAL_TIPO_VALOR 
                                                                       WHERE ID_AGENTE_SUCURSAL = :NEW.ID_AGENTE_SUCURSAL
                                                                       AND ID_AGENTE_SUCURSAL_TIPO_VALOR = '53797188065600000944'
                                                                       AND IS_DELETED = 'N');
                                                                      
EXCEPTION
     WHEN OTHERS THEN
       -- 
       RAPIPAGO.RP_FUNCIONES_UTILES.LOG_PROCESO_CENTRAL( $$PLSQL_UNIT, 'Error en ' || $$PLSQL_UNIT || ': ' || SQLERRM, 'S');
       RAISE ;
END;]]></body>
<triggerTime>AFTER</triggerTime>
<owner>C62C8F1E-2A53-0B75-10F9-F26CB65E46CC</owner>
<table>80B68678-7C49-E212-35AF-0A3E3BDDD305</table>
</TriggerOraclev10g>